# 数据库配置说明

## 数据库连接配置

### 1. 数据库基本信息
- **数据库类型**: MySQL 8.0
- **数据库名称**: order_food
- **字符集**: utf8mb4
- **排序规则**: utf8mb4_unicode_ci

### 2. 连接配置（application.yaml）
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/order_food?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true
    username: root
    password: root
    driver-class-name: com.mysql.cj.jdbc.Driver
```

### 3. MyBatis Plus 配置
```yaml
mybatis-plus:
  mapper-locations: classpath*:/mapper/**/*.xml
  type-aliases-package: weixin.order_food.entity
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
    map-underscore-to-camel-case: true
  global-config:
    db-config:
      id-type: AUTO
      logic-delete-field: deleted
      logic-delete-value: 1
      logic-not-delete-value: 0
```

## 数据库表结构

### users 表（用户表）
| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | BIGINT | 主键ID |
| openid | VARCHAR(64) | 微信openid（唯一） |
| nickname | VARCHAR(100) | 用户昵称 |
| avatar_url | VARCHAR(500) | 用户头像 |
| gender | TINYINT | 性别（0-未知，1-男性，2-女性） |
| phone | VARCHAR(20) | 手机号码 |
| create_time | DATETIME | 创建时间 |
| update_time | DATETIME | 更新时间 |
| deleted | TINYINT | 逻辑删除（0-未删除，1-已删除） |

## 使用说明

### 1. 初始化数据库
执行 `database/init.sql` 脚本创建数据库和表结构

### 2. 修改连接配置
根据实际情况修改 `application.yaml` 中的数据库连接信息：
- `spring.datasource.url`: 数据库连接地址
- `spring.datasource.username`: 数据库用户名
- `spring.datasource.password`: 数据库密码

### 3. 测试连接
启动应用后，可以通过以下方式测试数据库连接：
- 查看控制台日志是否有数据库连接成功的提示
- 访问相关接口测试数据操作功能

## 注意事项

1. **MySQL 版本**: 确保使用 MySQL 8.0 或更高版本
2. **字符集**: 建议使用 utf8mb4 字符集以支持 emoji 等特殊字符
3. **时区**: 配置正确的时区避免时间相关问题
4. **SSL**: 开发环境可以关闭 SSL，生产环境建议开启
5. **连接池**: Spring Boot 默认使用 HikariCP 连接池，可根据需要调整配置